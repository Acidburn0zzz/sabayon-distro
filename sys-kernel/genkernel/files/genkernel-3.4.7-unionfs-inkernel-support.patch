diff -Nurp genkernel-3.4.7_pre5.orig/gen_compile.sh genkernel-3.4.7_pre5/gen_compile.sh
--- genkernel-3.4.7_pre5.orig/gen_compile.sh	2007-03-14 02:20:22.000000000 +0100
+++ genkernel-3.4.7_pre5/gen_compile.sh	2007-04-04 16:54:17.000000000 +0200
@@ -403,13 +403,10 @@ compile_unionfs_utils() {
 			gen_die 'Unionfs directory ${UNIONFS_DIR} is invalid!'
 		cd "${UNIONFS_DIR}"
 		print_info 1 'unionfs tools: >> Compiling...'
-		sed -i utils/Makefile -e 's|${CC} -o|${CC} -static -o|g'
-		sed -i Makefile -e 's|${CC} -o|${CC} -static -o|g'
-		compile_generic utils utils
-
-		if [ ! -e "uniondbg" ]; then
-			cd utils
-		fi
+		./bootstrap &> /dev/null
+		./configure >> ${DEBUGFILE} 2>&1 || gen_die 'Configuring unionfs-utils failed!'
+		sed -i Makefile -e 's|LDFLAGS = |LDFLAGS = -all-static|g'
+		compile_generic '' utils
 		print_info 1 'unionfs: >> Copying to cache...'
 		strip uniondbg unionctl
 		cp uniondbg ${TEMP}/unionfs/sbin/ || 
diff -Nurp genkernel-3.4.7_pre5.orig/generic/linuxrc genkernel-3.4.7_pre5/generic/linuxrc
--- genkernel-3.4.7_pre5.orig/generic/linuxrc	2007-03-14 02:20:22.000000000 +0100
+++ genkernel-3.4.7_pre5/generic/linuxrc	2007-04-04 16:56:31.000000000 +0200
@@ -557,6 +557,9 @@ then
 	if [ "${USE_UNIONFS_NORMAL}" -eq '1' ]
 	then
 		union_insert_dir ${UNION} ${NEW_ROOT}/${FS_LOCATION}
+
+		mkdir ${UNION}/mnt/livecd
+		mount --bind ${NEW_ROOT}/${FS_LOCATION} ${UNION}/mnt/livecd
 		
 		# Make sure fstab notes livecd is mounted ro.  Makes system skip remount which fails on unionfs dirs.
 		sed -e 's|\(.*\s/\s*tmpfs\s*\)defaults\(.*\)|\1defaults,ro\2|' /${UNION}/etc/fstab > /${UNION}/etc/fstab.new
diff -Nurp genkernel-3.4.7_pre5.orig/gen_initramfs.sh genkernel-3.4.7_pre5/gen_initramfs.sh
--- genkernel-3.4.7_pre5.orig/gen_initramfs.sh	2007-03-14 02:20:22.000000000 +0100
+++ genkernel-3.4.7_pre5/gen_initramfs.sh	2007-04-04 16:57:38.000000000 +0200
@@ -137,21 +137,6 @@ append_devfs(){
 	rm -rf "${TEMP}/initramfs-devfs-temp" > /dev/null
 }
 
-append_unionfs_modules(){
-	if [ -d "${TEMP}/initramfs-unionfs-modules-temp" ]
-	then
-		rm -r "${TEMP}/initramfs-unionfs-modules-temp/"
-	fi
-	print_info 1 'UNIONFS MODULES: Adding support (compiling)...'
-	compile_unionfs_modules
-	mkdir -p "${TEMP}/initramfs-unionfs-modules-temp/"
-	/bin/tar -jxpf "${UNIONFS_MODULES_BINCACHE}" -C "${TEMP}/initramfs-unionfs-modules-temp" ||
-		gen_die "Could not extract unionfs modules binary cache!";
-	cd "${TEMP}/initramfs-unionfs-modules-temp/"
-	find . -print | cpio ${CPIO_ARGS} --append -F "${CPIO}"
-	rm -r "${TEMP}/initramfs-unionfs-modules-temp/"
-}
-
 append_unionfs_tools(){
 	if [ -d "${TEMP}/initramfs-unionfs-tools-temp" ]
 	then
@@ -487,7 +472,6 @@ create_initramfs() {
 	append_data 'busybox' "${BUSYBOX}"
 	append_data 'devfs' "${DEVFS}"
 #	append_data 'udev' "${UDEV}"
-	append_data 'unionfs_modules' "${UNIONFS}"
 	append_data 'unionfs_tools' "${UNIONFS}"
 	append_data 'suspend' "${SUSPEND}"
 	append_data 'lvm2' "${LVM2}"
diff -Nurp genkernel-3.4.7_pre5.orig/gen_initrd.sh genkernel-3.4.7_pre5/gen_initrd.sh
--- genkernel-3.4.7_pre5.orig/gen_initrd.sh	2007-03-14 02:20:22.000000000 +0100
+++ genkernel-3.4.7_pre5/gen_initrd.sh	2007-04-04 16:58:09.000000000 +0200
@@ -126,15 +126,6 @@ create_base_initrd_sys() {
 #		fi
 #	fi
 	
-	#unionfs modules
-	if [ "${UNIONFS}" -eq '1' ]
-	then
-		print_info 1 'UNIONFS MODULES: Adding support (compiling)...'
-		compile_unionfs_modules
-		/bin/tar -jxpf "${UNIONFS_MODULES_BINCACHE}" -C "${TEMP}/initrd-temp" ||
-			gen_die "Could not extract unionfs modules binary cache!";
-	fi
-	
 	#unionfs utils
 	if [ "${UNIONFS}" -eq '1' ]
 	then
diff -Nurp genkernel-3.4.7_pre5.orig/genkernel.conf genkernel-3.4.7_pre5/genkernel.conf
--- genkernel-3.4.7_pre5.orig/genkernel.conf	2007-03-14 02:20:22.000000000 +0100
+++ genkernel-3.4.7_pre5/genkernel.conf	2007-04-04 16:59:02.000000000 +0200
@@ -136,10 +136,9 @@ DMRAID_BINCACHE="%%CACHE%%/dmraid-${DMRA
 # 2.6.17			1.3
 
 UNIONFS_VER="VERSION_UNIONFS"
-UNIONFS_DIR="unionfs-${UNIONFS_VER}"
-UNIONFS_SRCTAR="${GK_SHARE}/pkg/unionfs-${UNIONFS_VER}.tar.gz"
-UNIONFS_BINCACHE="%%CACHE%%/unionfs-${UNIONFS_VER}-tools-%%ARCH%%.tar.bz2"
-UNIONFS_MODULES_BINCACHE="%%CACHE%%/unionfs-${UNIONFS_VER}-modules-%%KV%%-%%ARCH%%.tar.bz2"
+UNIONFS_DIR="unionfs-utils"
+UNIONFS_SRCTAR="${GK_SHARE}/pkg/unionfs-utils-${UNIONFS_VER}.tar.gz"
+UNIONFS_BINCACHE="%%CACHE%%/unionfs-utils-${UNIONFS_VER}-%%ARCH%%.tar.bz2"
 
 E2FSPROGS_VER="VERSION_E2FSPROGS"
 E2FSPROGS_DIR="e2fsprogs-${E2FSPROGS_VER}"
diff -Nurp genkernel-3.4.7_pre5.orig/x86/modules_load genkernel-3.4.7_pre5/x86/modules_load
--- genkernel-3.4.7_pre5.orig/x86/modules_load	2007-03-14 02:20:22.000000000 +0100
+++ genkernel-3.4.7_pre5/x86/modules_load	2007-04-04 16:59:14.000000000 +0200
@@ -25,4 +25,4 @@ MODULES_DMRAID="dm-mod dm-mirror raid0 r
 MODULES_SATA="sata_promise sata_sil sata_sil24 sata_svw sata_via \
 sata_nv sata_sx4 sata_sis sata_uli sata_vsc sata_qstor ahci libata \
 ata_piix sata_mv pdc_adma scsi_wait_scan"
-MODULES_FS="ext2 ext3 reiserfs jfs nfs xfs"
+MODULES_FS="ext2 ext3 reiserfs jfs nfs xfs unionfs"
diff -Nurp genkernel-3.4.7_pre5.orig/x86_64/modules_load genkernel-3.4.7_pre5/x86_64/modules_load
--- genkernel-3.4.7_pre5.orig/x86_64/modules_load	2007-03-14 02:20:22.000000000 +0100
+++ genkernel-3.4.7_pre5/x86_64/modules_load	2007-04-04 16:59:22.000000000 +0200
@@ -25,4 +25,4 @@ MODULES_DMRAID="dm-mod dm-mirror raid0 r
 MODULES_SATA="sata_promise sata_sil sata_sil24 sata_svw sata_via \
 sata_nv sata_sx4 sata_sis sata_uli sata_vsc sata_qstor ahci libata \
 ata_piix sata_mv pdc_adma scsi_wait_scan"
-MODULES_FS="ext2 ext3 reiserfs jfs nfs xfs"
+MODULES_FS="ext2 ext3 reiserfs jfs nfs xfs unionfs"
