Fix audio on Macmini and Macbook.

From: Takashi Iwai <tiwai@suse.de>


---

 sound/pci/hda/patch_sigmatel.c |   18 +++++++++++++++---
 1 files changed, 15 insertions(+), 3 deletions(-)

diff --git a/sound/pci/hda/patch_sigmatel.c b/sound/pci/hda/patch_sigmatel.c
index e3964fc..686a15a 100644
--- a/sound/pci/hda/patch_sigmatel.c
+++ b/sound/pci/hda/patch_sigmatel.c
@@ -549,12 +549,24 @@ static unsigned int d945gtp5_pin_configs[10] = {
 	0x02a19320, 0x40000100,
 };
 
-static unsigned int macbook_pro_v1_pin_configs[10] = {
+static unsigned int macmini_pin_configs[10] = {
+	0x0321e230, 0x400000fd, 0x9017e110, 0x01014010,
+	0x400000fd, 0x0381e021, 0x1345e240, 0x13c5e22e,
+	0x400000fc, 0x400000fb
+};
+
+static unsigned int macbook_pin_configs[10] = {
 	0x0321e230, 0x03a1e020, 0x9017e110, 0x01014010,
 	0x01a19021, 0x0381e021, 0x1345e240, 0x13c5e22e,
 	0x02a19320, 0x400000fb
 };
 
+static unsigned int macbook_pro_v1_pin_configs[10] = {
+	0x0321e230, 0x02a7e020, 0x9017e110, 0x01014010,
+	0x400000fd, 0x0381e021, 0x1345e240, 0x13c5e22e,
+	0x400000fc, 0x400000fb
+};
+
 static unsigned int macbook_pro_v2_pin_configs[10] = {
 	0x0221401f, 0x90a70120, 0x01813024, 0x01014010,
 	0x400000fd, 0x01016011, 0x1345e240, 0x13c5e22e,
@@ -571,8 +583,8 @@ static unsigned int *stac922x_brd_tbl[STAC_922X_MODELS] = {
 	[STAC_D945_REF] = ref922x_pin_configs,
 	[STAC_D945GTP3] = d945gtp3_pin_configs,
 	[STAC_D945GTP5] = d945gtp5_pin_configs,
-	[STAC_MACMINI] = macbook_pro_v1_pin_configs,
-	[STAC_MACBOOK] = macbook_pro_v1_pin_configs,
+	[STAC_MACMINI] = macmini_pin_configs,
+	[STAC_MACBOOK] = macbook_pin_configs,
 	[STAC_MACBOOK_PRO_V1] = macbook_pro_v1_pin_configs,
 	[STAC_MACBOOK_PRO_V2] = macbook_pro_v2_pin_configs,
 	[STAC_IMAC_INTEL] = imac_intel_pin_configs,
Display all controls when the subsystem id is wrong (0x100).

From: Nicolas Boichat <nicolas@boichat.ch>


---

 sound/pci/hda/patch_sigmatel.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/sound/pci/hda/patch_sigmatel.c b/sound/pci/hda/patch_sigmatel.c
index 686a15a..89ee79b 100644
--- a/sound/pci/hda/patch_sigmatel.c
+++ b/sound/pci/hda/patch_sigmatel.c
@@ -2040,6 +2040,7 @@ static int patch_stac922x(struct hda_codec *codec)
 		case 0x106b0a00: /* MacBook First generatoin */
 			spec->board_config = STAC_MACBOOK;
 			break;
+		case 0x100: /* Invalid subsystem ID */
 		case 0x106b0200: /* MacBook Pro first generation */
 			spec->board_config = STAC_MACBOOK_PRO_V1;
 			break;
