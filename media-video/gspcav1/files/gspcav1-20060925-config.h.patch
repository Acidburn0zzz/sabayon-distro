--- gspca_core.c.orig	2006-12-11 19:47:55.000000000 +0000
+++ gspca_core.c	2006-12-11 20:04:06.000000000 +0000
@@ -33,9 +33,13 @@
 * Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 static const char version[] = GSPCA_VERSION;
+#include <linux/version.h>
+#if LINUX_VERSION_CODE <= KERNEL_VERSION(2,6,18)
 #include <linux/config.h>
+#else
+#include <linux/autoconf.h>
+#endif
 #include <linux/module.h>
-#include <linux/version.h>
 #include <linux/init.h>
 #include <linux/fs.h>
 #include <linux/vmalloc.h>
