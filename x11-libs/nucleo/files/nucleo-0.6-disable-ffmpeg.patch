diff -Nurp nucleo-0.6.orig/configure nucleo-0.6/configure
--- nucleo-0.6.orig/configure	2007-01-29 10:59:11.000000000 +0100
+++ nucleo-0.6/configure	2007-05-04 15:26:54.000000000 +0200
@@ -23862,7 +23862,7 @@ done
 # Plugins and demos (outside libNucleo)
 
 problem_ffmpeg=""
-with_ffmpeg="yes"
+with_ffmpeg="no"
 
   { echo "$as_me:$LINENO: checking for libavformat using pkg-config" >&5
 echo $ECHO_N "checking for libavformat using pkg-config... $ECHO_C" >&6; }
@@ -24104,7 +24104,7 @@ fi
 
 # --------------------------------------------------------
 
-ac_config_files="$ac_config_files Makefile nucleo/nucleo.H nucleo/Makefile nucleo/core/Makefile nucleo/core/select/Makefile nucleo/core/carbon/Makefile nucleo/core/corefoundation/Makefile nucleo/utils/Makefile nucleo/network/Makefile nucleo/network/udp/Makefile nucleo/network/tcp/Makefile nucleo/network/http/Makefile nucleo/network/dnssd/Makefile nucleo/image/Makefile nucleo/image/encoding/Makefile nucleo/image/source/Makefile nucleo/image/sink/Makefile nucleo/image/processing/Makefile nucleo/image/processing/basic/Makefile nucleo/image/processing/chromakeying/Makefile nucleo/image/processing/convolution/Makefile nucleo/image/processing/difference/Makefile nucleo/image/processing/gamma/Makefile nucleo/image/processing/noise/Makefile nucleo/gl/Makefile nucleo/gl/glIncludes.H nucleo/gl/window/Makefile nucleo/gl/texture/Makefile nucleo/gl/text/Makefile nucleo/gl/scenegraph/Makefile nucleo/gl/shading/Makefile nucleo/helpers/Makefile nucleo/plugins/Makefile nucleo/plugins/vnc/Makefile nucleo/plugins/ffmpeg/Makefile nucleo/plugins/qt/Makefile tests/Makefile demos/Makefile demos/video/Makefile demos/misc/Makefile demos/vnc/Makefile demos/opencv/Makefile demos/opencv/faceFinder/Makefile demos/opencv/opticalFlow/Makefile apps/Makefile apps/videoServer/Makefile data/Makefile data/vera/Makefile docs/Makefile docs/MacOSX/Makefile docs/MacOSX/nTest docs/MacOSX/nBundle build-utils/Makefile build-utils/rpm/Makefile build-utils/rpm/nucleo.spec nucleo-config nucleo.pc"
+ac_config_files="$ac_config_files Makefile nucleo/nucleo.H nucleo/Makefile nucleo/core/Makefile nucleo/core/select/Makefile nucleo/core/carbon/Makefile nucleo/core/corefoundation/Makefile nucleo/utils/Makefile nucleo/network/Makefile nucleo/network/udp/Makefile nucleo/network/tcp/Makefile nucleo/network/http/Makefile nucleo/network/dnssd/Makefile nucleo/image/Makefile nucleo/image/encoding/Makefile nucleo/image/source/Makefile nucleo/image/sink/Makefile nucleo/image/processing/Makefile nucleo/image/processing/basic/Makefile nucleo/image/processing/chromakeying/Makefile nucleo/image/processing/convolution/Makefile nucleo/image/processing/difference/Makefile nucleo/image/processing/gamma/Makefile nucleo/image/processing/noise/Makefile nucleo/gl/Makefile nucleo/gl/glIncludes.H nucleo/gl/window/Makefile nucleo/gl/texture/Makefile nucleo/gl/text/Makefile nucleo/gl/scenegraph/Makefile nucleo/gl/shading/Makefile nucleo/helpers/Makefile nucleo/plugins/Makefile nucleo/plugins/vnc/Makefile nucleo/plugins/qt/Makefile tests/Makefile demos/Makefile demos/video/Makefile demos/misc/Makefile demos/vnc/Makefile demos/opencv/Makefile demos/opencv/faceFinder/Makefile demos/opencv/opticalFlow/Makefile apps/Makefile apps/videoServer/Makefile data/Makefile data/vera/Makefile docs/Makefile docs/MacOSX/Makefile docs/MacOSX/nTest docs/MacOSX/nBundle build-utils/Makefile build-utils/rpm/Makefile build-utils/rpm/nucleo.spec nucleo-config nucleo.pc"
 
 #  nucleo/plugins/howl/Makefile
 
@@ -24826,7 +24826,6 @@ do
     "nucleo/helpers/Makefile") CONFIG_FILES="$CONFIG_FILES nucleo/helpers/Makefile" ;;
     "nucleo/plugins/Makefile") CONFIG_FILES="$CONFIG_FILES nucleo/plugins/Makefile" ;;
     "nucleo/plugins/vnc/Makefile") CONFIG_FILES="$CONFIG_FILES nucleo/plugins/vnc/Makefile" ;;
-    "nucleo/plugins/ffmpeg/Makefile") CONFIG_FILES="$CONFIG_FILES nucleo/plugins/ffmpeg/Makefile" ;;
     "nucleo/plugins/qt/Makefile") CONFIG_FILES="$CONFIG_FILES nucleo/plugins/qt/Makefile" ;;
     "tests/Makefile") CONFIG_FILES="$CONFIG_FILES tests/Makefile" ;;
     "demos/Makefile") CONFIG_FILES="$CONFIG_FILES demos/Makefile" ;;
diff -Nurp nucleo-0.6.orig/configure.ac nucleo-0.6/configure.ac
--- nucleo-0.6.orig/configure.ac	2007-05-04 14:24:06.000000000 +0200
+++ nucleo-0.6/configure.ac	2007-05-04 15:26:08.000000000 +0200
@@ -255,7 +255,7 @@ AC_CHECK_FUNCS(dlopen, [], [AC_CHECK_LIB
 # Plugins and demos (outside libNucleo)
 
 problem_ffmpeg=""
-with_ffmpeg="yes"
+with_ffmpeg="no"
 MY_PKG_CONFIG_CHECK([libavformat], HAVE_FFMPEG, FFMPEG)
 AC_SUBST(HAVE_FFMPEG)
 AC_SUBST(FFMPEG_LDFLAGS)
@@ -401,7 +401,6 @@ AC_CONFIG_FILES(
   nucleo/helpers/Makefile
   nucleo/plugins/Makefile
   nucleo/plugins/vnc/Makefile
-  nucleo/plugins/ffmpeg/Makefile
   nucleo/plugins/qt/Makefile
   tests/Makefile
   demos/Makefile
diff -Nurp nucleo-0.6.orig/Makefile.in nucleo-0.6/Makefile.in
--- nucleo-0.6.orig/Makefile.in	2007-01-29 10:59:00.000000000 +0100
+++ nucleo-0.6/Makefile.in	2007-05-04 14:25:46.000000000 +0200
@@ -126,9 +126,6 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 F77 = @F77@
 FFLAGS = @FFLAGS@
-FFMPEG_CPPFLAGS = @FFMPEG_CPPFLAGS@
-FFMPEG_LDFLAGS = @FFMPEG_LDFLAGS@
-FFMPEG_LIBS = @FFMPEG_LIBS@
 FREETYPE_CONFIG = @FREETYPE_CONFIG@
 GREP = @GREP@
 HAVE_AGL = @HAVE_AGL@
diff -Nurp nucleo-0.6.orig/nucleo/plugins/ffmpeg/ffmpegImageSink.cxx nucleo-0.6/nucleo/plugins/ffmpeg/ffmpegImageSink.cxx
--- nucleo-0.6.orig/nucleo/plugins/ffmpeg/ffmpegImageSink.cxx	2007-01-15 16:33:27.000000000 +0100
+++ nucleo-0.6/nucleo/plugins/ffmpeg/ffmpegImageSink.cxx	1970-01-01 01:00:00.000000000 +0100
@@ -1,367 +0,0 @@
-/*
- *
- * nucleo/plugins/ffmpeg/ffmpegImageSink.cxx --
- *
- * Copyright (C) Nicolas Roussel
- *
- * See the file LICENSE for information on usage and redistribution of
- * this file, and for a DISCLAIMER OF ALL WARRANTIES.
- *
- */
-
-#include <nucleo/config.H>
-#include <nucleo/utils/ByteOrder.H>
-#include <nucleo/plugins/ffmpeg/ffmpegImageSink.H>
-#include <nucleo/image/encoding/Conversion.H>
-#include <nucleo/image/processing/basic/Resize.H>
-
-#include <stdexcept>
-#include <iomanip>
-
-// ------------------------------------------------------------------------------------
-
-extern "C" {
-  void *
-  ffmpegImageSink_factory(const nucleo::URI *uri) {
-    return new nucleo::ffmpegImageSink(*uri) ;
-  }
-}
-
-// ------------------------------------------------------------------------------------
-
-namespace nucleo {
-
-#define MPEGTS_PACKET_SIZE 188
-#define MPEGTS_SYNC 0x47
-#define MPEGTS_NULLPACKET_PID 0x1FFF
-#define MPEGTS_TRANSPORT_LOAD 7
-#define MPEGTS_TRANSPORT_SIZE MPEGTS_PACKET_SIZE*MPEGTS_TRANSPORT_LOAD
-
-#define FREEPLAYER_VIDEO_PID 0x0044
-#define FREEPLAYER_AUDIO_PID 0x0045
-
-  int
-  ffmpegImageSink::udp_callback(void *opaque, uint8_t *buffer, int size) {
-    ffmpegImageSink *sink = (ffmpegImageSink*)opaque ;
-
-    int nbPackets = size/MPEGTS_PACKET_SIZE ;
-    int padding = MPEGTS_TRANSPORT_LOAD - nbPackets ;
-    uint8_t *packet ;
-
-#if 0
-    std::cerr << nbPackets << " packets:" ;
-    packet = buffer ;
-    for (int i=0; i<nbPackets; ++i) {
-	 unsigned short pid = ((packet[1] & 0x1f) << 8) + packet[2] ;
-	 std::cerr << " 0x" << std::hex << std::setfill('0') << std::setw(4) << pid << std::dec  ;
-#if 0
-	 if (pid==0x0100) {
-	   packet[1] = (packet[1]&0xe0) | (FREEPLAYER_VIDEO_PID >> 8) ;
-	   packet[2] = (FREEPLAYER_VIDEO_PID & 0xff) ;
-	 }
-#endif
-	 packet += MPEGTS_PACKET_SIZE ;
-    }
-    std::cerr << std::endl ;
-#endif
-
-    if (size==MPEGTS_TRANSPORT_SIZE)
-	 return (sink->sender->send(buffer,size)==size) ? 0 : -1 ;
-
-    // Warning: this works only if buffer is the one we passed to
-    // init_put_byte (i.e. it has enough room for holding
-    // MPEGTS_TRANSPORT_SIZE bytes)
-
-    packet = buffer + size ;
-    for (int i=0; i<padding; ++i) {
-	 packet[0] = MPEGTS_SYNC ;
-	 packet[1] = (MPEGTS_NULLPACKET_PID >> 8) ;
-	 packet[2] = (MPEGTS_NULLPACKET_PID & 0xff) ;
-	 packet += MPEGTS_PACKET_SIZE ;
-    }
-    return (sink->sender->send(buffer,MPEGTS_TRANSPORT_SIZE)==MPEGTS_TRANSPORT_SIZE) ? 0 : -1 ;
-  }
-
-  // ------------------------------------------------------------------------------------
-
-  ffmpegImageSink::ffmpegImageSink(const URI &u) {
-    av_register_all();
-
-    filename = "" ;
-    output_format = 0 ;
-    format_context = 0 ;
-    vstream = 0 ;
-    video_outbuf = 0 ;
-    picture = &srcPic ;
-    sender = 0 ;
-
-    uri = u ;
-  }
-       
-  bool
-  ffmpegImageSink::start(void) {
-    if (output_format) return false ;
-
-    std::string query = uri.query ;
-    std::string format = "mp4" ;
-    bool guessFormat = !URI::getQueryArg(query, "format", &format) ;
-
-    output_format = 0 ;
-    if (uri.scheme=="mpegts-udp") {
-	 output_format = guess_format("mpegts", NULL, NULL) ;
-    } else {
-	 filename = uri.opaque!="" ? uri.opaque : uri.path ;
-	 if (guessFormat) output_format = guess_format(NULL, filename.c_str(), NULL) ;
-	 if (!output_format) output_format = guess_format(format.c_str(), NULL, NULL) ;
-    } 
-
-    std::string message ;
-    if (!output_format)
-	 message = "Unable to find the requested format" ;
-    else if (output_format->video_codec == CODEC_ID_NONE) {
-	 output_format = 0 ;
-	 message = "Not a video format" ;
-    } else if (output_format->flags & AVFMT_NOFILE) {
-	 output_format = 0 ;
-	 message = "AVFMT_NOFILE unsupported" ;
-    } else if (output_format->flags & AVFMT_RAWPICTURE) {
-	 output_format = 0 ;
-	 message = "AVFMT_RAWPICTURE unsupported" ;
-    }
-
-    if (!output_format) {
-	 std::cerr << "ffmpegImageSink: " << message << std::endl ;
-	 return false ;
-    }
-
-    // ----------------
-
-    format_context = av_alloc_format_context();
-    if (!format_context) {
-	 std::cerr << "ffmpegImageSink: unable to create the AVFormatContext" << std::endl ;
-	 stop() ;
-	 return false ;
-    }
-    format_context->oformat = output_format;
-    snprintf(format_context->filename, sizeof(format_context->filename), 
-		   "%s", filename.c_str()) ;
- 
-    vstream = av_new_stream(format_context, FREEPLAYER_VIDEO_PID) ;
-    if (!vstream) {
-	 std::cerr << "ffmpegImageSink: unable to create the AVStream" << std::endl ;
-	 stop() ;
-	 return false ;
-    }
-
-    // ----------------
-
-    frameCount = 0 ; sampler.start() ;
-    return true ;
-  }
-
-  // ------------------------------------------------------------------------------------
-
-  bool
-  ffmpegImageSink::init(Image *img) {
-    unsigned int framerate = 25 ;
-    unsigned int bitrate = 6000 ;
-    unsigned int tolerance = 4000 ;
-    unsigned int gopsize = 8 ;
-    unsigned int qmin = 2 ;
-    unsigned int qmax = 31 ;
-
-    std::string query = uri.query ;
-    URI::getQueryArg(query, "framerate", &framerate) ;
-    URI::getQueryArg(query, "bitrate", &bitrate) ;
-    URI::getQueryArg(query, "tolerance", &tolerance) ;
-    URI::getQueryArg(query, "gopsize", &gopsize) ;
-    URI::getQueryArg(query, "qmin", &qmin) ;
-    URI::getQueryArg(query, "qmax", &qmax) ;
-
-    AVCodecContext *codec_context = vstream->codec ;
-    codec_context->codec_id = output_format->video_codec ;
-    codec_context->codec_type = CODEC_TYPE_VIDEO ;
-    codec_context->pix_fmt = PIX_FMT_YUV420P ;
-    codec_context->width = img->getWidth() ;  // must be a multiple of two
-    codec_context->height = img->getHeight() ; // must be a multiple of two
-    codec_context->me_method = ME_EPZS ; // ME_ZERO
-    // ---
-    codec_context->bit_rate = bitrate*1000 ;
-    codec_context->bit_rate_tolerance = tolerance*1000 ;
-    codec_context->time_base.den = framerate ; // frames per second
-    codec_context->time_base.num = 1 ;
-    codec_context->gop_size = gopsize ; // at most one intra frame every gop_size frames
-    codec_context->qmin = qmin ;
-    codec_context->qmax = qmax ;
-    // ---
-    // some formats want stream headers to be seperate
-    if (!strcmp(format_context->oformat->name, "mp4")
-	   || !strcmp(format_context->oformat->name, "mov")
-	   || !strcmp(format_context->oformat->name, "3gp"))
-	 codec_context->flags |= CODEC_FLAG_GLOBAL_HEADER ;
-
-    if (av_set_parameters(format_context, NULL) < 0) {
-	 std::cerr << "ffmpegImageSink: invalid output format parameters" << std::endl ;
-	 return false ;
-    }
-
-    dump_format(format_context, 0, filename.c_str(), 1) ; // FIXME: for debug only
-
-    // ------------------
-
-    AVCodec *codec = avcodec_find_encoder(codec_context->codec_id);
-    if (!codec) {
-	 std::cerr << "ffmpegImageSink: codec not found" << std::endl ;
-	 return false ;
-    }
-
-    if (avcodec_open(codec_context, codec) < 0) {
-	 std::cerr << "ffmpegImageSink: could not open codec" << std::endl ;
-	 vstream->codec = 0 ;
-	 return false ;
-    }
-
-    // ------------------
-
-    if (filename!="") {
-	 sender = 0 ;
-	 if (url_fopen(&format_context->pb, filename.c_str(), URL_WRONLY) < 0) {
-	   std::cerr << "ffmpegImageSink: could not open " << filename << std::endl ;
-	   return false ;
-	 }
-    } else {
-	 unsigned int buffer_size = MPEGTS_PACKET_SIZE*MPEGTS_TRANSPORT_LOAD ;
-	 uint8_t *buffer = new uint8_t [buffer_size] ;
-	 int port = uri.port ;
-	 if (!port) port = 1234 ;
-	 sender = new UdpSender(uri.host.c_str(), port) ;
-	 if (init_put_byte(&(format_context->pb), buffer, buffer_size,
-				    1, (void *)this,
-				    0, udp_callback, 0) < 0) {
-	   std::cerr << "ffmpegImageSink: init_put_byte failed" << std::endl ;
-	   return false ;
-	 }
-	 format_context->pb.is_streamed = 1 ; // no seek
-	 format_context->pb.max_packet_size = buffer_size ;
-    }
-    
-    av_write_header(format_context) ;
-
-    video_outbuf_size = 256*1024 ; // FIXME ?
-    video_outbuf = new uint8_t [video_outbuf_size] ;
-
-    switch (img->getEncoding()) {
-    case Image::ARGB: 
-	 // PIX_FMT_RGBA32 is endian-sensitive...
-	 srcEncoding = ByteOrder::isLittleEndian() ? PIX_FMT_RGB24 : PIX_FMT_RGBA32 ; 
-	 break ; 
-    case Image::L: srcEncoding = PIX_FMT_GRAY8 ; break ;
-    case Image::YpCbCr420: srcEncoding = PIX_FMT_YUV420P ; break ;
-    default: srcEncoding = PIX_FMT_RGB24 ; break ;
-    }
-
-    avcodec_get_frame_defaults(&srcPic) ;
-    if (codec_context->pix_fmt==srcEncoding)
-	 picture = &srcPic ;
-    else {
-	 avcodec_get_frame_defaults(&convPic) ;
-	 int size = avpicture_get_size(codec_context->pix_fmt, codec_context->width, codec_context->height) ;
-	 avpicture_fill((AVPicture *)&convPic,
-				 new uint8_t [size],
-				 codec_context->pix_fmt, codec_context->width, codec_context->height) ;
-	 picture = &convPic ;
-    }
-
-    return true ;
-  }
-
-  // ------------------------------------------------------------------------------------
-
-  bool
-  ffmpegImageSink::handle(Image *img) {
-    if (!output_format) return false ;
-
-    if (!frameCount && !init(img)) {
-	 stop() ;
-	 return false ;
-    }
-
-    int64_t pts = av_rescale_rnd(sampler.read(), vstream->time_base.den, 1000*vstream->time_base.num, AV_ROUND_NEAR_INF) ;
-
-    AVCodecContext *codec_context = vstream->codec ;
-    if (srcEncoding==PIX_FMT_RGB24) convertImage(img, Image::RGB) ;
-    resizeImage(img, codec_context->width, codec_context->height) ;
-    avpicture_fill((AVPicture *)&srcPic, img->getData(), srcEncoding,
-			    codec_context->width, codec_context->height) ;
-    if (codec_context->pix_fmt != srcEncoding)
-	 img_convert((AVPicture *)&convPic, codec_context->pix_fmt, 
-			   (AVPicture *)&srcPic, srcEncoding, codec_context->width, codec_context->height);
-    picture->pts = pts ;
-
-    int out_size = avcodec_encode_video(codec_context, video_outbuf, video_outbuf_size, picture) ;
-    if (!out_size) {
-	 std::cerr << "ffmpegImageSink: avcodec_encode_video returned 0" << std::endl ;
-	 stop() ;
-	 return false ;
-    }
-
-    // std::cerr << "out_size = " << out_size << std::endl ;
-
-    AVPacket pkt ;
-    av_init_packet(&pkt) ;
-    pkt.stream_index = vstream->index ;
-    pkt.data = video_outbuf ;
-    pkt.size = out_size ;
-    if (codec_context->coded_frame) {
-	 pkt.pts = pkt.dts = pts ;
-	 if (codec_context->coded_frame->key_frame) pkt.flags |= PKT_FLAG_KEY ;
-    }
-    if (av_write_frame(format_context, &pkt) != 0) {
-	 std::cerr << "ffmpegImageSink: error while writing video frame" << std::endl ;
-	 stop() ;
-	 return false ;
-    }
-
-    // std::cerr << "ffmpegImageSink::handle, line " << __LINE__ << std::endl ;
-
-    frameCount++ ; sampler.tick() ;
-
-    return true ;
-  }
-
-  // ------------------------------------------------------------------------------------
-
-  bool
-  ffmpegImageSink::stop(void) {
-    if (!output_format) return false ;
-
-    if (vstream) {
-	 if (picture==&convPic) delete [] convPic.data[0] ;
-	 if (vstream->codec) {
-	   avcodec_close(vstream->codec) ;
-	   av_write_trailer(format_context) ;
-	   if (!sender) url_fclose(&format_context->pb) ;
-	 }
-	 av_freep(&vstream) ;
-    }
-
-    if (sender) delete sender ;
-
-    if (format_context) av_free(format_context) ;
-
-    if (video_outbuf) delete [] video_outbuf ;
-
-    filename = "" ;
-    output_format = 0 ;
-    format_context = 0 ;
-    vstream = 0 ;
-    video_outbuf = 0 ;
-    picture = &srcPic ;
-    sender = 0 ;
-
-    sampler.stop() ;
-
-    return true ;
-  }
-
-}
diff -Nurp nucleo-0.6.orig/nucleo/plugins/ffmpeg/ffmpegImageSink.H nucleo-0.6/nucleo/plugins/ffmpeg/ffmpegImageSink.H
--- nucleo-0.6.orig/nucleo/plugins/ffmpeg/ffmpegImageSink.H	2006-10-09 01:31:29.000000000 +0200
+++ nucleo-0.6/nucleo/plugins/ffmpeg/ffmpegImageSink.H	1970-01-01 01:00:00.000000000 +0100
@@ -1,61 +0,0 @@
-#ifndef n_ffmpegImageSink_H_
-#define n_ffmpegImageSink_H_
-
-/*
- *
- * nucleo/plugins/ffmpeg/ffmpegImageSink.H --
- *
- * Copyright (C) Nicolas Roussel
- *
- * See the file LICENSE for information on usage and redistribution of
- * this file, and for a DISCLAIMER OF ALL WARRANTIES.
- *
- */
-
-#include <nucleo/image/sink/ImageSink.H>
-#include <nucleo/core/URI.H>
-#include <nucleo/network/udp/UdpSender.H>
-
-#include <avformat.h>
-
-namespace nucleo {
-
-  class ffmpegImageSink : public ImageSink {
-
-  private:
-
-    URI uri ;
-
-    AVOutputFormat *output_format ;
-    AVFormatContext *format_context ;
-    AVStream *vstream ;
-    AVFrame srcPic, convPic, *picture ;
-    int video_outbuf_size ;
-    uint8_t *video_outbuf ;
-    int srcEncoding ;
-
-    std::string filename ;   // if used as a file sink
-
-    UdpSender *sender ;      // if used as an mpegts-udp sink
-    static int udp_callback(void *opaque, uint8_t *buffer, int size) ;
-
-    bool init(Image *img) ;
-
-  public:
-
-    ffmpegImageSink(const URI &uri) ;
-    ~ffmpegImageSink() { stop() ; }
-
-    ImageSink::state getState(void) {
-	 return (output_format!=0?STARTED:STOPPED) ;
-    }
-
-    bool start(void) ;
-    bool handle(Image *img) ;
-    bool stop(void) ;
-
-  } ;
-
-}
-
-#endif
diff -Nurp nucleo-0.6.orig/nucleo/plugins/ffmpeg/ffmpegImageSource.cxx nucleo-0.6/nucleo/plugins/ffmpeg/ffmpegImageSource.cxx
--- nucleo-0.6.orig/nucleo/plugins/ffmpeg/ffmpegImageSource.cxx	2007-01-21 13:03:38.000000000 +0100
+++ nucleo-0.6/nucleo/plugins/ffmpeg/ffmpegImageSource.cxx	1970-01-01 01:00:00.000000000 +0100
@@ -1,183 +0,0 @@
-/*
- *
- * nucleo/plugins/ffmpeg/ffmpegImageSource.cxx --
- *
- * Copyright (C) Nicolas Roussel
- *
- * See the file LICENSE for information on usage and redistribution of
- * this file, and for a DISCLAIMER OF ALL WARRANTIES.
- *
- */
-
-#include <nucleo/config.H>
-
-#include "ffmpegImageSource.H"
-
-#include <nucleo/image/encoding/Conversion.H>
-
-// -------------------------------------------------------------------------------------------
-
-extern "C" {
-  void *ffmpegImageSource_factory(const nucleo::URI *uri, nucleo::Image::Encoding e) {
-    return (void *)(new nucleo::ffmpegImageSource(*uri, e)) ;
-  }
-}
-
-// -------------------------------------------------------------------------------------------
-
-namespace nucleo {
-
-  ffmpegImageSource::ffmpegImageSource(const URI &uri, Image::Encoding e) {
-    av_register_all() ;
-
-    filename = uri.opaque!="" ? uri.opaque : uri.path ;
-    target_encoding = e ;
-
-    timer = 0 ;
-  }
-
-  bool
-  ffmpegImageSource::start(void) {
-    int ret = av_open_input_file(&fctx, filename.c_str(), 0, 0, 0);
-    if (ret<0) {
-	 std::cerr << "ffmpegImageSource: failed to open " << filename << " (" << ret << ")" << std::endl ;
-	 return false ;
-    }
-
-    ret = av_find_stream_info(fctx) ;
-    if (ret<0) {
-	 std::cerr << "ffmpegImageSource: failed to find codec parameters for " << filename << " (" << ret << ")" << std::endl ;
-	 return false ;
-    }
-
-    dump_format(fctx, 1, filename.c_str(), 0) ;
-
-    bool found_video_stream = false ;
-    for (unsigned int i=0; i<fctx->nb_streams; ++i) {
-	 if (fctx->streams[i]->codec->codec_type==CODEC_TYPE_VIDEO) {
-	   video_stream = i ;
-	   found_video_stream = true ;
-	 } else
-	   fctx->streams[i]->discard = AVDISCARD_ALL ; // disable this track
-    }
-
-    if (!found_video_stream) {
-	 std::cerr << "ffmpegImageSource: no video stream" << std::endl ;
-	 return false ;
-    }
-  
-    // --------------------------------------------------
-
-    cctx = fctx->streams[video_stream]->codec ;
-    time_base = TimeKeeper::second*fctx->streams[video_stream]->r_frame_rate.den/fctx->streams[video_stream]->r_frame_rate.num ;
-
-    AVCodec *codec = avcodec_find_decoder(cctx->codec_id) ;
-    if (!codec) {
-	 std::cerr << "ffmpegImageSource: codec not found" << std::endl ;
-	 return false ;
-    }
-
-    ret = avcodec_open(cctx, codec);
-    if (ret<0) {
-	 std::cerr << "ffmpegImageSource: unable to open codec" << std::endl ;
-	 return false ;
-    }
-
-    // --------------------------------------------------
-
-    timer = TimeKeeper::create(10*TimeKeeper::millisecond) ;
-    subscribeTo(timer) ;
-
-    frameCount = 0 ; getNextImageTime = TimeStamp::undef ; sampler.start() ;
-
-    return true ;
-  }
-
-  void
-  ffmpegImageSource::react(Observable *obs) {
-    if (!timer) return ;
-
-    AVPacket packet ;
-    AVFrame frame ;
-
-    while (av_read_frame(fctx, &packet) == 0) {
-	 Chronometer elapsed ;
-
-	 if (packet.stream_index!=video_stream || packet.dts==AV_NOPTS_VALUE) {
-	   av_free_packet(&packet) ;
-	   continue ;
-	 }
-
-#if 0
-	 double pts = time_base*packet.dts;
-	 std::cerr << "time_base: " << time_base << " dts: " << packet.dts << " pts: " << pts << std::endl ;
-#endif
-
-	 int got_picture = 0 ;
-	 avcodec_decode_video(cctx, &frame, &got_picture, packet.data, packet.size) ;
-	 av_free_packet(&packet) ;
-	 if (!got_picture) continue ;
-
-	 lastImage.setTimeStamp() ;
-	 switch (cctx->pix_fmt) {
-	 case PIX_FMT_GRAY8:
-	   lastImage.setDims(cctx->width, cctx->height) ;
-	   lastImage.setEncoding(Image::L) ;
-	   lastImage.setData(frame.data[0], cctx->width*cctx->height, Image::NONE) ;
-	   break ;
-	 case PIX_FMT_RGB24:
-	   lastImage.setDims(cctx->width, cctx->height) ;
-	   lastImage.setEncoding(Image::RGB) ;
-	   lastImage.setData(frame.data[0], (cctx->width*cctx->height)*3, Image::NONE) ;
-	   break ;
-	 default: // Convert everything else to RGB24
-	   // PIX_FMT_YUV420P has three separate plans and ffmpeg converts
-	   // them to RGB faster than nucleo does...
-	   // PIX_FMT_RGBA32 and PIX_FMT_RGB565 are stored in cpu endianness
-	   // On OS X (powerpc), they correspond to Image::ARGB and Image::RGB565
-	   lastImage.prepareFor(cctx->width, cctx->height, Image::RGB) ;
-	   AVFrame tmpframe ;
-	   avpicture_fill((AVPicture*)&tmpframe, lastImage.getData(), PIX_FMT_RGB24,
-				   cctx->width, cctx->height) ;
-	   img_convert((AVPicture*)&tmpframe, PIX_FMT_RGB24,
-				(AVPicture*)&frame, cctx->pix_fmt, cctx->width, cctx->height) ;
-	   break ;
-	 }
-	 
-	 frameCount++ ; sampler.tick() ;
-#if 0
-	 long delta = time_base - elapsed.read()*TimeKeeper::millisecond ;
-	 if (delta<0) delta = 0 ;
-	 // std::cerr << "time_base: " << time_base << " delta: " << delta << std::endl ;
-	 timer->arm(delta*TimeKeeper::millisecond) ;
-#else
-	 timer->arm(time_base*TimeKeeper::millisecond) ;
-#endif
-	 if (!_pendingNotifications) notifyObservers() ;	 
-	 break ;
-    }
-
-  }
-
-  bool
-  ffmpegImageSource::getNextImage(Image *img, TimeStamp::inttype reftime) {
-    if (!timer || !frameCount || reftime>=lastImage.getTimeStamp()) return false ;
-    getNextImageTime = lastImage.getTimeStamp() ;
-    bool ok = convertImage(&lastImage, target_encoding) ;
-    if (ok) img->linkDataFrom(lastImage) ;
-    return ok ;
-  }
-
-  bool
-  ffmpegImageSource::stop(void) {
-    if (!timer) return false ;
-
-    unsubscribeFrom(timer) ;
-    delete timer ;
-    timer = 0 ;
-    sampler.stop() ;
-
-    return true ;
-  }
-
-}
diff -Nurp nucleo-0.6.orig/nucleo/plugins/ffmpeg/ffmpegImageSource.H nucleo-0.6/nucleo/plugins/ffmpeg/ffmpegImageSource.H
--- nucleo-0.6.orig/nucleo/plugins/ffmpeg/ffmpegImageSource.H	2006-10-09 01:31:29.000000000 +0200
+++ nucleo-0.6/nucleo/plugins/ffmpeg/ffmpegImageSource.H	1970-01-01 01:00:00.000000000 +0100
@@ -1,51 +0,0 @@
-#ifndef n_ffmpegImageSource_H_
-#define n_ffmpegImageSource_H_
-
-/*
- *
- * nucleo/plugins/ffmpeg/ffmpegImageSource.H --
- *
- * Copyright (C) Nicolas Roussel
- *
- * See the file LICENSE for information on usage and redistribution of
- * this file, and for a DISCLAIMER OF ALL WARRANTIES.
- *
- */
-
-#include <nucleo/image/source/ImageSource.H>
-#include <nucleo/core/TimeKeeper.H>
-
-#include <avformat.h>
-
-namespace nucleo {
-
-  class ffmpegImageSource : public ImageSource {
-
-  protected:
-
-    std::string filename ;
-
-    AVFormatContext *fctx ;
-    long time_base ;
-    int video_stream ;
-    AVCodecContext *cctx ;
-    TimeKeeper *timer ;
-
-    void react(Observable *) ;
-
-  public:
-
-    ffmpegImageSource(const URI &uri, Image::Encoding e) ;
-    virtual ~ffmpegImageSource(void) { stop() ; }
-
-    ImageSource::state getState(void) { return (timer?STARTED:STOPPED) ; }
-
-    bool start(void) ;
-    bool getNextImage(Image *img, TimeStamp::inttype reftime) ;
-    bool stop(void) ;
-
-  } ;
-
-}
-
-#endif
diff -Nurp nucleo-0.6.orig/nucleo/plugins/ffmpeg/Makefile.am nucleo-0.6/nucleo/plugins/ffmpeg/Makefile.am
--- nucleo-0.6.orig/nucleo/plugins/ffmpeg/Makefile.am	2007-05-04 14:24:06.000000000 +0200
+++ nucleo-0.6/nucleo/plugins/ffmpeg/Makefile.am	1970-01-01 01:00:00.000000000 +0100
@@ -1,48 +0,0 @@
-## -*- Makefile -*- mode
-## Process this file with automake to create Makefile.in
-#
-# nucleo/plugins/ffmpeg/Makefile.am --
-#
-# Copyright (C) Nicolas Roussel, Olivier Chapuis
-#
-# See the file LICENSE for information on usage and redistribution of
-# this file, and for a DISCLAIMER OF ALL WARRANTIES.
-#
-
-AM_CPPFLAGS = -I${top_srcdir} -I${top_builddir} @FFMPEG_CPPFLAGS@
-
-#lib_LTLIBRARIES = libnPffmpeg.la
-pkglib_LTLIBRARIES = nPffmpeg.la
-
-# the module
-nPffmpeg_la_SOURCES = ffmpegImageSource.cxx ffmpegImageSink.cxx
-nPffmpeg_la_LDFLAGS = -module -avoid-version @FFMPEG_LDFLAGS@
-nPffmpeg_la_LIBADD  = @FFMPEG_LIBS@
-
-# the library
-#libnPffmpeg_la_SOURCES = ffmpegImageSource.cxx ffmpegImageSink.cxx
-#libnPffmpeg_la_LDFLAGS = -version 0:0:0 @FFMPEG_LDFLAGS@
-#libnPffmpeg_la_LIBADD  = @FFMPEG_LIBS@
-
-if DARWIN
-nPffmpeg_la_LDFLAGS += -Wl,-read_only_relocs,suppress
-#libnPffmpeg_la_LDFLAGS += -Wl,-read_only_relocs,suppress
-endif
-
-#libnPffmpegincludedir = $(includedir)/nucleo/plugins/ffmpeg
-#libnPffmpeginclude_HEADERS = ffmpegImageSource.H ffmpegImageSink.H
-
-noinst_SCRIPTS = plugin-descr
-
-plugin-descr: nPffmpeg.la Makefile.am
-	@. nPffmpeg.la  && echo $$dlname > plugin-descr ; \
-	echo "   ImageSource::create ffmpegImageSource_factory" >> plugin-descr ; \
-	echo "      scheme=file" >> plugin-descr ; \
-	echo "      scheme=ffmpeg-file" >> plugin-descr ; \
-	echo "   ImageSink::create ffmpegImageSink_factory" >> plugin-descr ; \
-	echo "      scheme=file" >> plugin-descr ; \
-	echo "      scheme=ffmpeg-file" >> plugin-descr ; \
-	echo "      scheme=mpegts-udp" >> plugin-descr ; \
-	touch ../plugin-list-timestamp
-
-CLEANFILES = plugin-descr
diff -Nurp nucleo-0.6.orig/nucleo/plugins/ffmpeg/Makefile.in nucleo-0.6/nucleo/plugins/ffmpeg/Makefile.in
--- nucleo-0.6.orig/nucleo/plugins/ffmpeg/Makefile.in	2007-01-29 10:59:07.000000000 +0100
+++ nucleo-0.6/nucleo/plugins/ffmpeg/Makefile.in	1970-01-01 01:00:00.000000000 +0100
@@ -1,620 +0,0 @@
-# Makefile.in generated by automake 1.9.6 from Makefile.am.
-# @configure_input@
-
-# Copyright (C) 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002,
-# 2003, 2004, 2005  Free Software Foundation, Inc.
-# This Makefile.in is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
-
-# This program is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
-# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
-# PARTICULAR PURPOSE.
-
-@SET_MAKE@
-
-#
-# nucleo/plugins/ffmpeg/Makefile.am --
-#
-# Copyright (C) Nicolas Roussel, Olivier Chapuis
-#
-# See the file LICENSE for information on usage and redistribution of
-# this file, and for a DISCLAIMER OF ALL WARRANTIES.
-#
-
-
-
-srcdir = @srcdir@
-top_srcdir = @top_srcdir@
-VPATH = @srcdir@
-pkgdatadir = $(datadir)/@PACKAGE@
-pkglibdir = $(libdir)/@PACKAGE@
-pkgincludedir = $(includedir)/@PACKAGE@
-top_builddir = ../../..
-am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
-INSTALL = @INSTALL@
-install_sh_DATA = $(install_sh) -c -m 644
-install_sh_PROGRAM = $(install_sh) -c
-install_sh_SCRIPT = $(install_sh) -c
-INSTALL_HEADER = $(INSTALL_DATA)
-transform = $(program_transform_name)
-NORMAL_INSTALL = :
-PRE_INSTALL = :
-POST_INSTALL = :
-NORMAL_UNINSTALL = :
-PRE_UNINSTALL = :
-POST_UNINSTALL = :
-build_triplet = @build@
-host_triplet = @host@
-@DARWIN_TRUE@am__append_1 = -Wl,-read_only_relocs,suppress
-@DARWIN_TRUE@am__append_2 = -Wl,-read_only_relocs,suppress
-subdir = nucleo/plugins/ffmpeg
-DIST_COMMON = $(libnPffmpeginclude_HEADERS) $(srcdir)/Makefile.am \
-	$(srcdir)/Makefile.in
-ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
-am__aclocal_m4_deps = $(top_srcdir)/configure.ac
-am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
-	$(ACLOCAL_M4)
-mkinstalldirs = $(install_sh) -d
-CONFIG_HEADER = $(top_builddir)/nucleo/config.H
-CONFIG_CLEAN_FILES =
-am__vpath_adj_setup = srcdirstrip=`echo "$(srcdir)" | sed 's|.|.|g'`;
-am__vpath_adj = case $$p in \
-    $(srcdir)/*) f=`echo "$$p" | sed "s|^$$srcdirstrip/||"`;; \
-    *) f=$$p;; \
-  esac;
-am__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
-am__installdirs = "$(DESTDIR)$(libdir)" "$(DESTDIR)$(pkglibdir)" \
-	"$(DESTDIR)$(libnPffmpegincludedir)"
-libLTLIBRARIES_INSTALL = $(INSTALL)
-pkglibLTLIBRARIES_INSTALL = $(INSTALL)
-LTLIBRARIES = $(lib_LTLIBRARIES) $(pkglib_LTLIBRARIES)
-libnPffmpeg_la_DEPENDENCIES =
-am_libnPffmpeg_la_OBJECTS = ffmpegImageSource.lo ffmpegImageSink.lo
-libnPffmpeg_la_OBJECTS = $(am_libnPffmpeg_la_OBJECTS)
-nPffmpeg_la_DEPENDENCIES =
-am_nPffmpeg_la_OBJECTS = ffmpegImageSource.lo ffmpegImageSink.lo
-nPffmpeg_la_OBJECTS = $(am_nPffmpeg_la_OBJECTS)
-SCRIPTS = $(noinst_SCRIPTS)
-DEFAULT_INCLUDES = -I. -I$(srcdir) -I$(top_builddir)/nucleo
-depcomp = $(SHELL) $(top_srcdir)/build-utils/depcomp
-am__depfiles_maybe = depfiles
-CXXCOMPILE = $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
-	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)
-LTCXXCOMPILE = $(LIBTOOL) --tag=CXX --mode=compile $(CXX) $(DEFS) \
-	$(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \
-	$(AM_CXXFLAGS) $(CXXFLAGS)
-CXXLD = $(CXX)
-CXXLINK = $(LIBTOOL) --tag=CXX --mode=link $(CXXLD) $(AM_CXXFLAGS) \
-	$(CXXFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@
-SOURCES = $(libnPffmpeg_la_SOURCES) $(nPffmpeg_la_SOURCES)
-DIST_SOURCES = $(libnPffmpeg_la_SOURCES) $(nPffmpeg_la_SOURCES)
-libnPffmpegincludeHEADERS_INSTALL = $(INSTALL_HEADER)
-HEADERS = $(libnPffmpeginclude_HEADERS)
-ETAGS = etags
-CTAGS = ctags
-DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
-ACLOCAL = @ACLOCAL@
-AMDEP_FALSE = @AMDEP_FALSE@
-AMDEP_TRUE = @AMDEP_TRUE@
-AMTAR = @AMTAR@
-AR = @AR@
-AUTOCONF = @AUTOCONF@
-AUTOHEADER = @AUTOHEADER@
-AUTOMAKE = @AUTOMAKE@
-AWK = @AWK@
-CC = @CC@
-CCDEPMODE = @CCDEPMODE@
-CFLAGS = @CFLAGS@
-CPP = @CPP@
-CPPFLAGS = @CPPFLAGS@
-CXX = @CXX@
-CXXCPP = @CXXCPP@
-CXXDEPMODE = @CXXDEPMODE@
-CXXFLAGS = @CXXFLAGS@
-CYGPATH_W = @CYGPATH_W@
-CYGWIN_FALSE = @CYGWIN_FALSE@
-CYGWIN_TRUE = @CYGWIN_TRUE@
-DARWIN_FALSE = @DARWIN_FALSE@
-DARWIN_TRUE = @DARWIN_TRUE@
-DEFS = @DEFS@
-DEPDIR = @DEPDIR@
-ECHO = @ECHO@
-ECHO_C = @ECHO_C@
-ECHO_N = @ECHO_N@
-ECHO_T = @ECHO_T@
-EGREP = @EGREP@
-EXEEXT = @EXEEXT@
-F77 = @F77@
-FFLAGS = @FFLAGS@
-FFMPEG_CPPFLAGS = @FFMPEG_CPPFLAGS@
-FFMPEG_LDFLAGS = @FFMPEG_LDFLAGS@
-FFMPEG_LIBS = @FFMPEG_LIBS@
-FREETYPE_CONFIG = @FREETYPE_CONFIG@
-GREP = @GREP@
-HAVE_AGL = @HAVE_AGL@
-HAVE_AGL_FALSE = @HAVE_AGL_FALSE@
-HAVE_AGL_TRUE = @HAVE_AGL_TRUE@
-HAVE_DNS_SD = @HAVE_DNS_SD@
-HAVE_DNS_SD_FALSE = @HAVE_DNS_SD_FALSE@
-HAVE_DNS_SD_TRUE = @HAVE_DNS_SD_TRUE@
-HAVE_EXIF = @HAVE_EXIF@
-HAVE_EXIF_FALSE = @HAVE_EXIF_FALSE@
-HAVE_EXIF_TRUE = @HAVE_EXIF_TRUE@
-HAVE_FFMPEG = @HAVE_FFMPEG@
-HAVE_FFMPEG_FALSE = @HAVE_FFMPEG_FALSE@
-HAVE_FFMPEG_TRUE = @HAVE_FFMPEG_TRUE@
-HAVE_FREETYPE2 = @HAVE_FREETYPE2@
-HAVE_FREETYPE2_FALSE = @HAVE_FREETYPE2_FALSE@
-HAVE_FREETYPE2_TRUE = @HAVE_FREETYPE2_TRUE@
-HAVE_GLX = @HAVE_GLX@
-HAVE_GLX_FALSE = @HAVE_GLX_FALSE@
-HAVE_GLX_TRUE = @HAVE_GLX_TRUE@
-HAVE_JPEG = @HAVE_JPEG@
-HAVE_JPEG_FALSE = @HAVE_JPEG_FALSE@
-HAVE_JPEG_TRUE = @HAVE_JPEG_TRUE@
-HAVE_OPENCV = @HAVE_OPENCV@
-HAVE_OPENCV_FALSE = @HAVE_OPENCV_FALSE@
-HAVE_OPENCV_TRUE = @HAVE_OPENCV_TRUE@
-HAVE_OPENGL = @HAVE_OPENGL@
-HAVE_OPENGL_FALSE = @HAVE_OPENGL_FALSE@
-HAVE_OPENGL_TRUE = @HAVE_OPENGL_TRUE@
-HAVE_PNG = @HAVE_PNG@
-HAVE_PNG_FALSE = @HAVE_PNG_FALSE@
-HAVE_PNG_TRUE = @HAVE_PNG_TRUE@
-HAVE_QT = @HAVE_QT@
-HAVE_QT_FALSE = @HAVE_QT_FALSE@
-HAVE_QT_TRUE = @HAVE_QT_TRUE@
-HAVE_VNC = @HAVE_VNC@
-HAVE_VNC_FALSE = @HAVE_VNC_FALSE@
-HAVE_VNC_TRUE = @HAVE_VNC_TRUE@
-HAVE_XINPUT = @HAVE_XINPUT@
-HAVE_XINPUT_FALSE = @HAVE_XINPUT_FALSE@
-HAVE_XINPUT_TRUE = @HAVE_XINPUT_TRUE@
-INSTALL_DATA = @INSTALL_DATA@
-INSTALL_PROGRAM = @INSTALL_PROGRAM@
-INSTALL_SCRIPT = @INSTALL_SCRIPT@
-INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-LDFLAGS = @LDFLAGS@
-LIBOBJS = @LIBOBJS@
-LIBS = @LIBS@
-LIBTOOL = @LIBTOOL@
-LINUX_FALSE = @LINUX_FALSE@
-LINUX_TRUE = @LINUX_TRUE@
-LN_S = @LN_S@
-LTLIBOBJS = @LTLIBOBJS@
-MAKEINFO = @MAKEINFO@
-MY_PKG_CONFIG = @MY_PKG_CONFIG@
-NUCLEO_PLUGINS_DIR = @NUCLEO_PLUGINS_DIR@
-NUCLEO_RESOURCES_DIR = @NUCLEO_RESOURCES_DIR@
-OBJEXT = @OBJEXT@
-OPENCV_CPPFLAGS = @OPENCV_CPPFLAGS@
-OPENCV_LDFLAGS = @OPENCV_LDFLAGS@
-OPENCV_LIBS = @OPENCV_LIBS@
-PACKAGE = @PACKAGE@
-PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@
-PACKAGE_NAME = @PACKAGE_NAME@
-PACKAGE_STRING = @PACKAGE_STRING@
-PACKAGE_TARNAME = @PACKAGE_TARNAME@
-PACKAGE_VERSION = @PACKAGE_VERSION@
-PATH_SEPARATOR = @PATH_SEPARATOR@
-QT_CPPFLAGS = @QT_CPPFLAGS@
-QT_LDFLAGS = @QT_LDFLAGS@
-QT_LIBS = @QT_LIBS@
-RANLIB = @RANLIB@
-SET_MAKE = @SET_MAKE@
-SHELL = @SHELL@
-STRIP = @STRIP@
-VERSION = @VERSION@
-VNC_CPPFLAGS = @VNC_CPPFLAGS@
-VNC_LDFLAGS = @VNC_LDFLAGS@
-XMKMF = @XMKMF@
-X_CFLAGS = @X_CFLAGS@
-X_EXTRA_LIBS = @X_EXTRA_LIBS@
-X_LIBS = @X_LIBS@
-X_PRE_LIBS = @X_PRE_LIBS@
-ac_ct_CC = @ac_ct_CC@
-ac_ct_CXX = @ac_ct_CXX@
-ac_ct_F77 = @ac_ct_F77@
-am__fastdepCC_FALSE = @am__fastdepCC_FALSE@
-am__fastdepCC_TRUE = @am__fastdepCC_TRUE@
-am__fastdepCXX_FALSE = @am__fastdepCXX_FALSE@
-am__fastdepCXX_TRUE = @am__fastdepCXX_TRUE@
-am__include = @am__include@
-am__leading_dot = @am__leading_dot@
-am__quote = @am__quote@
-am__tar = @am__tar@
-am__untar = @am__untar@
-bindir = @bindir@
-build = @build@
-build_alias = @build_alias@
-build_cpu = @build_cpu@
-build_os = @build_os@
-build_vendor = @build_vendor@
-datadir = @datadir@
-datarootdir = @datarootdir@
-docdir = @docdir@
-dvidir = @dvidir@
-exec_prefix = @exec_prefix@
-host = @host@
-host_alias = @host_alias@
-host_cpu = @host_cpu@
-host_os = @host_os@
-host_vendor = @host_vendor@
-htmldir = @htmldir@
-includedir = @includedir@
-infodir = @infodir@
-install_sh = @install_sh@
-libdir = @libdir@
-libexecdir = @libexecdir@
-localedir = @localedir@
-localstatedir = @localstatedir@
-mandir = @mandir@
-mkdir_p = @mkdir_p@
-oldincludedir = @oldincludedir@
-pdfdir = @pdfdir@
-prefix = @prefix@
-program_transform_name = @program_transform_name@
-psdir = @psdir@
-sbindir = @sbindir@
-sharedstatedir = @sharedstatedir@
-sysconfdir = @sysconfdir@
-target_alias = @target_alias@
-AM_CPPFLAGS = -I${top_srcdir} -I${top_builddir} @FFMPEG_CPPFLAGS@
-lib_LTLIBRARIES = libnPffmpeg.la
-pkglib_LTLIBRARIES = nPffmpeg.la
-
-# the module
-nPffmpeg_la_SOURCES = ffmpegImageSource.cxx ffmpegImageSink.cxx
-nPffmpeg_la_LDFLAGS = -module @FFMPEG_LDFLAGS@ $(am__append_1)
-nPffmpeg_la_LIBADD = @FFMPEG_LIBS@
-
-# the library
-libnPffmpeg_la_SOURCES = ffmpegImageSource.cxx ffmpegImageSink.cxx
-libnPffmpeg_la_LDFLAGS = -version 0:0:0 @FFMPEG_LDFLAGS@ \
-	$(am__append_2)
-libnPffmpeg_la_LIBADD = @FFMPEG_LIBS@
-libnPffmpegincludedir = $(includedir)/nucleo/plugins/ffmpeg
-libnPffmpeginclude_HEADERS = ffmpegImageSource.H ffmpegImageSink.H
-noinst_SCRIPTS = plugin-descr
-CLEANFILES = plugin-descr
-all: all-am
-
-.SUFFIXES:
-.SUFFIXES: .cxx .lo .o .obj
-$(srcdir)/Makefile.in:  $(srcdir)/Makefile.am  $(am__configure_deps)
-	@for dep in $?; do \
-	  case '$(am__configure_deps)' in \
-	    *$$dep*) \
-	      cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh \
-		&& exit 0; \
-	      exit 1;; \
-	  esac; \
-	done; \
-	echo ' cd $(top_srcdir) && $(AUTOMAKE) --gnu  nucleo/plugins/ffmpeg/Makefile'; \
-	cd $(top_srcdir) && \
-	  $(AUTOMAKE) --gnu  nucleo/plugins/ffmpeg/Makefile
-.PRECIOUS: Makefile
-Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
-	@case '$?' in \
-	  *config.status*) \
-	    cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh;; \
-	  *) \
-	    echo ' cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)'; \
-	    cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe);; \
-	esac;
-
-$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
-	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
-
-$(top_srcdir)/configure:  $(am__configure_deps)
-	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
-$(ACLOCAL_M4):  $(am__aclocal_m4_deps)
-	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
-install-libLTLIBRARIES: $(lib_LTLIBRARIES)
-	@$(NORMAL_INSTALL)
-	test -z "$(libdir)" || $(mkdir_p) "$(DESTDIR)$(libdir)"
-	@list='$(lib_LTLIBRARIES)'; for p in $$list; do \
-	  if test -f $$p; then \
-	    f=$(am__strip_dir) \
-	    echo " $(LIBTOOL) --mode=install $(libLTLIBRARIES_INSTALL) $(INSTALL_STRIP_FLAG) '$$p' '$(DESTDIR)$(libdir)/$$f'"; \
-	    $(LIBTOOL) --mode=install $(libLTLIBRARIES_INSTALL) $(INSTALL_STRIP_FLAG) "$$p" "$(DESTDIR)$(libdir)/$$f"; \
-	  else :; fi; \
-	done
-
-uninstall-libLTLIBRARIES:
-	@$(NORMAL_UNINSTALL)
-	@set -x; list='$(lib_LTLIBRARIES)'; for p in $$list; do \
-	  p=$(am__strip_dir) \
-	  echo " $(LIBTOOL) --mode=uninstall rm -f '$(DESTDIR)$(libdir)/$$p'"; \
-	  $(LIBTOOL) --mode=uninstall rm -f "$(DESTDIR)$(libdir)/$$p"; \
-	done
-
-clean-libLTLIBRARIES:
-	-test -z "$(lib_LTLIBRARIES)" || rm -f $(lib_LTLIBRARIES)
-	@list='$(lib_LTLIBRARIES)'; for p in $$list; do \
-	  dir="`echo $$p | sed -e 's|/[^/]*$$||'`"; \
-	  test "$$dir" != "$$p" || dir=.; \
-	  echo "rm -f \"$${dir}/so_locations\""; \
-	  rm -f "$${dir}/so_locations"; \
-	done
-install-pkglibLTLIBRARIES: $(pkglib_LTLIBRARIES)
-	@$(NORMAL_INSTALL)
-	test -z "$(pkglibdir)" || $(mkdir_p) "$(DESTDIR)$(pkglibdir)"
-	@list='$(pkglib_LTLIBRARIES)'; for p in $$list; do \
-	  if test -f $$p; then \
-	    f=$(am__strip_dir) \
-	    echo " $(LIBTOOL) --mode=install $(pkglibLTLIBRARIES_INSTALL) $(INSTALL_STRIP_FLAG) '$$p' '$(DESTDIR)$(pkglibdir)/$$f'"; \
-	    $(LIBTOOL) --mode=install $(pkglibLTLIBRARIES_INSTALL) $(INSTALL_STRIP_FLAG) "$$p" "$(DESTDIR)$(pkglibdir)/$$f"; \
-	  else :; fi; \
-	done
-
-uninstall-pkglibLTLIBRARIES:
-	@$(NORMAL_UNINSTALL)
-	@set -x; list='$(pkglib_LTLIBRARIES)'; for p in $$list; do \
-	  p=$(am__strip_dir) \
-	  echo " $(LIBTOOL) --mode=uninstall rm -f '$(DESTDIR)$(pkglibdir)/$$p'"; \
-	  $(LIBTOOL) --mode=uninstall rm -f "$(DESTDIR)$(pkglibdir)/$$p"; \
-	done
-
-clean-pkglibLTLIBRARIES:
-	-test -z "$(pkglib_LTLIBRARIES)" || rm -f $(pkglib_LTLIBRARIES)
-	@list='$(pkglib_LTLIBRARIES)'; for p in $$list; do \
-	  dir="`echo $$p | sed -e 's|/[^/]*$$||'`"; \
-	  test "$$dir" != "$$p" || dir=.; \
-	  echo "rm -f \"$${dir}/so_locations\""; \
-	  rm -f "$${dir}/so_locations"; \
-	done
-libnPffmpeg.la: $(libnPffmpeg_la_OBJECTS) $(libnPffmpeg_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(libdir) $(libnPffmpeg_la_LDFLAGS) $(libnPffmpeg_la_OBJECTS) $(libnPffmpeg_la_LIBADD) $(LIBS)
-nPffmpeg.la: $(nPffmpeg_la_OBJECTS) $(nPffmpeg_la_DEPENDENCIES) 
-	$(CXXLINK) -rpath $(pkglibdir) $(nPffmpeg_la_LDFLAGS) $(nPffmpeg_la_OBJECTS) $(nPffmpeg_la_LIBADD) $(LIBS)
-
-mostlyclean-compile:
-	-rm -f *.$(OBJEXT)
-
-distclean-compile:
-	-rm -f *.tab.c
-
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ffmpegImageSink.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ffmpegImageSource.Plo@am__quote@
-
-.cxx.o:
-@am__fastdepCXX_TRUE@	if $(CXXCOMPILE) -MT $@ -MD -MP -MF "$(DEPDIR)/$*.Tpo" -c -o $@ $<; \
-@am__fastdepCXX_TRUE@	then mv -f "$(DEPDIR)/$*.Tpo" "$(DEPDIR)/$*.Po"; else rm -f "$(DEPDIR)/$*.Tpo"; exit 1; fi
-@AMDEP_TRUE@@am__fastdepCXX_FALSE@	source='$<' object='$@' libtool=no @AMDEPBACKSLASH@
-@AMDEP_TRUE@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
-@am__fastdepCXX_FALSE@	$(CXXCOMPILE) -c -o $@ $<
-
-.cxx.obj:
-@am__fastdepCXX_TRUE@	if $(CXXCOMPILE) -MT $@ -MD -MP -MF "$(DEPDIR)/$*.Tpo" -c -o $@ `$(CYGPATH_W) '$<'`; \
-@am__fastdepCXX_TRUE@	then mv -f "$(DEPDIR)/$*.Tpo" "$(DEPDIR)/$*.Po"; else rm -f "$(DEPDIR)/$*.Tpo"; exit 1; fi
-@AMDEP_TRUE@@am__fastdepCXX_FALSE@	source='$<' object='$@' libtool=no @AMDEPBACKSLASH@
-@AMDEP_TRUE@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
-@am__fastdepCXX_FALSE@	$(CXXCOMPILE) -c -o $@ `$(CYGPATH_W) '$<'`
-
-.cxx.lo:
-@am__fastdepCXX_TRUE@	if $(LTCXXCOMPILE) -MT $@ -MD -MP -MF "$(DEPDIR)/$*.Tpo" -c -o $@ $<; \
-@am__fastdepCXX_TRUE@	then mv -f "$(DEPDIR)/$*.Tpo" "$(DEPDIR)/$*.Plo"; else rm -f "$(DEPDIR)/$*.Tpo"; exit 1; fi
-@AMDEP_TRUE@@am__fastdepCXX_FALSE@	source='$<' object='$@' libtool=yes @AMDEPBACKSLASH@
-@AMDEP_TRUE@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
-@am__fastdepCXX_FALSE@	$(LTCXXCOMPILE) -c -o $@ $<
-
-mostlyclean-libtool:
-	-rm -f *.lo
-
-clean-libtool:
-	-rm -rf .libs _libs
-
-distclean-libtool:
-	-rm -f libtool
-uninstall-info-am:
-install-libnPffmpegincludeHEADERS: $(libnPffmpeginclude_HEADERS)
-	@$(NORMAL_INSTALL)
-	test -z "$(libnPffmpegincludedir)" || $(mkdir_p) "$(DESTDIR)$(libnPffmpegincludedir)"
-	@list='$(libnPffmpeginclude_HEADERS)'; for p in $$list; do \
-	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
-	  f=$(am__strip_dir) \
-	  echo " $(libnPffmpegincludeHEADERS_INSTALL) '$$d$$p' '$(DESTDIR)$(libnPffmpegincludedir)/$$f'"; \
-	  $(libnPffmpegincludeHEADERS_INSTALL) "$$d$$p" "$(DESTDIR)$(libnPffmpegincludedir)/$$f"; \
-	done
-
-uninstall-libnPffmpegincludeHEADERS:
-	@$(NORMAL_UNINSTALL)
-	@list='$(libnPffmpeginclude_HEADERS)'; for p in $$list; do \
-	  f=$(am__strip_dir) \
-	  echo " rm -f '$(DESTDIR)$(libnPffmpegincludedir)/$$f'"; \
-	  rm -f "$(DESTDIR)$(libnPffmpegincludedir)/$$f"; \
-	done
-
-ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)
-	list='$(SOURCES) $(HEADERS) $(LISP) $(TAGS_FILES)'; \
-	unique=`for i in $$list; do \
-	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
-	  done | \
-	  $(AWK) '    { files[$$0] = 1; } \
-	       END { for (i in files) print i; }'`; \
-	mkid -fID $$unique
-tags: TAGS
-
-TAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
-		$(TAGS_FILES) $(LISP)
-	tags=; \
-	here=`pwd`; \
-	list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
-	unique=`for i in $$list; do \
-	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
-	  done | \
-	  $(AWK) '    { files[$$0] = 1; } \
-	       END { for (i in files) print i; }'`; \
-	if test -z "$(ETAGS_ARGS)$$tags$$unique"; then :; else \
-	  test -n "$$unique" || unique=$$empty_fix; \
-	  $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
-	    $$tags $$unique; \
-	fi
-ctags: CTAGS
-CTAGS:  $(HEADERS) $(SOURCES)  $(TAGS_DEPENDENCIES) \
-		$(TAGS_FILES) $(LISP)
-	tags=; \
-	here=`pwd`; \
-	list='$(SOURCES) $(HEADERS)  $(LISP) $(TAGS_FILES)'; \
-	unique=`for i in $$list; do \
-	    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
-	  done | \
-	  $(AWK) '    { files[$$0] = 1; } \
-	       END { for (i in files) print i; }'`; \
-	test -z "$(CTAGS_ARGS)$$tags$$unique" \
-	  || $(CTAGS) $(CTAGSFLAGS) $(AM_CTAGSFLAGS) $(CTAGS_ARGS) \
-	     $$tags $$unique
-
-GTAGS:
-	here=`$(am__cd) $(top_builddir) && pwd` \
-	  && cd $(top_srcdir) \
-	  && gtags -i $(GTAGS_ARGS) $$here
-
-distclean-tags:
-	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
-
-distdir: $(DISTFILES)
-	@srcdirstrip=`echo "$(srcdir)" | sed 's|.|.|g'`; \
-	topsrcdirstrip=`echo "$(top_srcdir)" | sed 's|.|.|g'`; \
-	list='$(DISTFILES)'; for file in $$list; do \
-	  case $$file in \
-	    $(srcdir)/*) file=`echo "$$file" | sed "s|^$$srcdirstrip/||"`;; \
-	    $(top_srcdir)/*) file=`echo "$$file" | sed "s|^$$topsrcdirstrip/|$(top_builddir)/|"`;; \
-	  esac; \
-	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
-	  dir=`echo "$$file" | sed -e 's,/[^/]*$$,,'`; \
-	  if test "$$dir" != "$$file" && test "$$dir" != "."; then \
-	    dir="/$$dir"; \
-	    $(mkdir_p) "$(distdir)$$dir"; \
-	  else \
-	    dir=''; \
-	  fi; \
-	  if test -d $$d/$$file; then \
-	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
-	      cp -pR $(srcdir)/$$file $(distdir)$$dir || exit 1; \
-	    fi; \
-	    cp -pR $$d/$$file $(distdir)$$dir || exit 1; \
-	  else \
-	    test -f $(distdir)/$$file \
-	    || cp -p $$d/$$file $(distdir)/$$file \
-	    || exit 1; \
-	  fi; \
-	done
-check-am: all-am
-check: check-am
-all-am: Makefile $(LTLIBRARIES) $(SCRIPTS) $(HEADERS)
-installdirs:
-	for dir in "$(DESTDIR)$(libdir)" "$(DESTDIR)$(pkglibdir)" "$(DESTDIR)$(libnPffmpegincludedir)"; do \
-	  test -z "$$dir" || $(mkdir_p) "$$dir"; \
-	done
-install: install-am
-install-exec: install-exec-am
-install-data: install-data-am
-uninstall: uninstall-am
-
-install-am: all-am
-	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
-
-installcheck: installcheck-am
-install-strip:
-	$(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
-	  install_sh_PROGRAM="$(INSTALL_STRIP_PROGRAM)" INSTALL_STRIP_FLAG=-s \
-	  `test -z '$(STRIP)' || \
-	    echo "INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'"` install
-mostlyclean-generic:
-
-clean-generic:
-	-test -z "$(CLEANFILES)" || rm -f $(CLEANFILES)
-
-distclean-generic:
-	-test -z "$(CONFIG_CLEAN_FILES)" || rm -f $(CONFIG_CLEAN_FILES)
-
-maintainer-clean-generic:
-	@echo "This command is intended for maintainers to use"
-	@echo "it deletes files that may require special tools to rebuild."
-clean: clean-am
-
-clean-am: clean-generic clean-libLTLIBRARIES clean-libtool \
-	clean-pkglibLTLIBRARIES mostlyclean-am
-
-distclean: distclean-am
-	-rm -rf ./$(DEPDIR)
-	-rm -f Makefile
-distclean-am: clean-am distclean-compile distclean-generic \
-	distclean-libtool distclean-tags
-
-dvi: dvi-am
-
-dvi-am:
-
-html: html-am
-
-info: info-am
-
-info-am:
-
-install-data-am: install-libnPffmpegincludeHEADERS
-
-install-exec-am: install-libLTLIBRARIES install-pkglibLTLIBRARIES
-
-install-info: install-info-am
-
-install-man:
-
-installcheck-am:
-
-maintainer-clean: maintainer-clean-am
-	-rm -rf ./$(DEPDIR)
-	-rm -f Makefile
-maintainer-clean-am: distclean-am maintainer-clean-generic
-
-mostlyclean: mostlyclean-am
-
-mostlyclean-am: mostlyclean-compile mostlyclean-generic \
-	mostlyclean-libtool
-
-pdf: pdf-am
-
-pdf-am:
-
-ps: ps-am
-
-ps-am:
-
-uninstall-am: uninstall-info-am uninstall-libLTLIBRARIES \
-	uninstall-libnPffmpegincludeHEADERS \
-	uninstall-pkglibLTLIBRARIES
-
-.PHONY: CTAGS GTAGS all all-am check check-am clean clean-generic \
-	clean-libLTLIBRARIES clean-libtool clean-pkglibLTLIBRARIES \
-	ctags distclean distclean-compile distclean-generic \
-	distclean-libtool distclean-tags distdir dvi dvi-am html \
-	html-am info info-am install install-am install-data \
-	install-data-am install-exec install-exec-am install-info \
-	install-info-am install-libLTLIBRARIES \
-	install-libnPffmpegincludeHEADERS install-man \
-	install-pkglibLTLIBRARIES install-strip installcheck \
-	installcheck-am installdirs maintainer-clean \
-	maintainer-clean-generic mostlyclean mostlyclean-compile \
-	mostlyclean-generic mostlyclean-libtool pdf pdf-am ps ps-am \
-	tags uninstall uninstall-am uninstall-info-am \
-	uninstall-libLTLIBRARIES uninstall-libnPffmpegincludeHEADERS \
-	uninstall-pkglibLTLIBRARIES
-
-
-plugin-descr: nPffmpeg.la Makefile.am
-	@. nPffmpeg.la  && echo $$dlname > plugin-descr ; \
-	echo "   ImageSource::create ffmpegImageSource_factory" >> plugin-descr ; \
-	echo "      scheme=file" >> plugin-descr ; \
-	echo "      scheme=ffmpeg-file" >> plugin-descr ; \
-	echo "   ImageSink::create ffmpegImageSink_factory" >> plugin-descr ; \
-	echo "      scheme=file" >> plugin-descr ; \
-	echo "      scheme=ffmpeg-file" >> plugin-descr ; \
-	echo "      scheme=mpegts-udp" >> plugin-descr ; \
-	touch ../plugin-list-timestamp
-# Tell versions [3.59,3.63) of GNU make to not export all variables.
-# Otherwise a system limit (for SysV at least) may be exceeded.
-.NOEXPORT:
diff -Nurp nucleo-0.6.orig/nucleo/plugins/Makefile.am nucleo-0.6/nucleo/plugins/Makefile.am
--- nucleo-0.6.orig/nucleo/plugins/Makefile.am	2007-01-22 14:42:23.000000000 +0100
+++ nucleo-0.6/nucleo/plugins/Makefile.am	2007-05-04 14:24:49.000000000 +0200
@@ -15,11 +15,6 @@ SUBDIRS += vnc
 PLUGIN_DESCR += vnc/plugin-descr 
 endif
 
-if HAVE_FFMPEG
-SUBDIRS += ffmpeg
-PLUGIN_DESCR += ffmpeg/plugin-descr 
-endif
-
 if HAVE_QT
 SUBDIRS += qt
 PLUGIN_DESCR += qt/plugin-descr 
diff -Nurp nucleo-0.6.orig/nucleo/plugins/Makefile.in nucleo-0.6/nucleo/plugins/Makefile.in
--- nucleo-0.6.orig/nucleo/plugins/Makefile.in	2007-01-29 10:59:07.000000000 +0100
+++ nucleo-0.6/nucleo/plugins/Makefile.in	2007-05-04 14:25:17.000000000 +0200
@@ -47,10 +47,8 @@ build_triplet = @build@
 host_triplet = @host@
 @HAVE_VNC_TRUE@am__append_1 = vnc
 @HAVE_VNC_TRUE@am__append_2 = vnc/plugin-descr 
-@HAVE_FFMPEG_TRUE@am__append_3 = ffmpeg
-@HAVE_FFMPEG_TRUE@am__append_4 = ffmpeg/plugin-descr 
-@HAVE_QT_TRUE@am__append_5 = qt
-@HAVE_QT_TRUE@am__append_6 = qt/plugin-descr 
+@HAVE_QT_TRUE@am__append_3 = qt
+@HAVE_QT_TRUE@am__append_4 = qt/plugin-descr 
 subdir = nucleo/plugins
 DIST_COMMON = $(srcdir)/Makefile.am $(srcdir)/Makefile.in
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
@@ -79,7 +77,7 @@ configDATA_INSTALL = $(INSTALL_DATA)
 DATA = $(config_DATA)
 ETAGS = etags
 CTAGS = ctags
-DIST_SUBDIRS = vnc ffmpeg qt
+DIST_SUBDIRS = vnc qt
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
 AMDEP_FALSE = @AMDEP_FALSE@
@@ -114,9 +112,6 @@ EGREP = @EGREP@
 EXEEXT = @EXEEXT@
 F77 = @F77@
 FFLAGS = @FFLAGS@
-FFMPEG_CPPFLAGS = @FFMPEG_CPPFLAGS@
-FFMPEG_LDFLAGS = @FFMPEG_LDFLAGS@
-FFMPEG_LIBS = @FFMPEG_LIBS@
 FREETYPE_CONFIG = @FREETYPE_CONFIG@
 GREP = @GREP@
 HAVE_AGL = @HAVE_AGL@
@@ -128,9 +123,6 @@ HAVE_DNS_SD_TRUE = @HAVE_DNS_SD_TRUE@
 HAVE_EXIF = @HAVE_EXIF@
 HAVE_EXIF_FALSE = @HAVE_EXIF_FALSE@
 HAVE_EXIF_TRUE = @HAVE_EXIF_TRUE@
-HAVE_FFMPEG = @HAVE_FFMPEG@
-HAVE_FFMPEG_FALSE = @HAVE_FFMPEG_FALSE@
-HAVE_FFMPEG_TRUE = @HAVE_FFMPEG_TRUE@
 HAVE_FREETYPE2 = @HAVE_FREETYPE2@
 HAVE_FREETYPE2_FALSE = @HAVE_FREETYPE2_FALSE@
 HAVE_FREETYPE2_TRUE = @HAVE_FREETYPE2_TRUE@
